/*!
 * ionic-native-transitions
 *  ---
 * Native transitions for Ionic applications
 * @version: v1.0.0-rc10
 * @author: shprink <contact@julienrenaux.fr>
 * @link: https://github.com/shprink/ionic-native-transitions
 * @license: MIT
 * 
 */
!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.ionicNativeTransitions=t():n.ionicNativeTransitions=t()}(this,function(){return function(n){function t(i){if(e[i])return e[i].exports;var a=e[i]={exports:{},id:i,loaded:!1};return n[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var a=e(2),o=i(a),r=e(1),s=i(r),u=e(3),l=i(u),c=angular.module("ionic-native-transitions",["ionic","ui.router"]);c.directive("nativeUiSref",s["default"]),c.provider("$ionicNativeTransitions",o["default"]),c.run(l["default"]),t["default"]=c=c.name,n.exports=t["default"]},function(n,t){"use strict";function e(n,t){var e,i=n.match(/^\s*({[^}]*})\s*$/);if(i&&(n=t+"("+i[1]+")"),e=n.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!e||4!==e.length)throw new Error("Invalid state ref '"+n+"'");return{state:e[1],paramExpr:e[3]||null}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=["$log","$ionicNativeTransitions","$state",function(n,t,i){"ngInject";function a(n,i,a,o){var r=n.$eval(a.nativeUiSrefOpts)||{},s=null;a.$observe("nativeOptions",function(t){var e=n.$eval(t);s=angular.isObject(e)?e:{}}),i.on("click",function(i){var u=e(a.nativeUiSref,o.current.name),l=angular.copy(n.$eval(u.paramExpr));return t.isEnabled()?void t.stateGo(u.state,l,s,r):void o.go(u.state,l,r)})}return a.$inject=["$scope","$element","$attrs","$state"],{controller:a,restrict:"A",scope:!1}}],n.exports=t["default"]},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){"ngInject";function n(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];return n=t,this}function t(){return window.cordova&&window.plugins&&window.plugins.nativepagetransitions?n:!1}function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return angular.extend(v,n),this}function i(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return angular.extend(g,n),this}function a(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return angular.extend(d,n),this}function o(e,i,a,o,f,p,m,b){function w(){var n=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(!n)return void e.debug("[native transition] cannot change url without url...");j();var i=p.url(n);return T(t),i}function h(){var n=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments.length<=2||void 0===arguments[2]?null:arguments[2],a=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(!n)return void e.debug("[native transition] cannot change state without a state...");if(f.current.name===n)return void e.debug("[native transition] same state transition are not possible");j();var o=f.go(n,t,a);return T(i),o}function $(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],o=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?"platform":arguments[2];return!t||window.cordova&&window.plugins&&window.plugins.nativepagetransitions?(n=t,t?(e.debug("[native transition] enabling plugin"),window.plugins&&window.plugins.nativepagetransitions&&angular.extend(window.plugins.nativepagetransitions.globalOptions,B()),a.$ionicGoBack=N,_=b.registerBackButtonAction(function(n,t){return N(t)},100),y()):(e.debug("[native transition] disabling plugin"),"undefined"==typeof arguments[1]&&(o=!1),a.$ionicGoBack=A,angular.isFunction(_)&&_.call(),S()),o?(e.debug("[native transition] disabling ionic transitions"),i.views.transition("none")):(e.debug("[native transition] enabling ionic transitions"),i.views.transition(r)),this):void e.debug("[native transition] is disabled or nativepagetransitions plugin is not present")}function T(){function n(){var n=void 0;return n=r.duration?parseInt(r.duration):parseInt(B().duration),ionic.Platform.isAndroid()?n+=r.androiddelay?parseInt(r.androiddelay):parseInt(B().androiddelay):ionic.Platform.isIOS()?n+=r.iosdelay?parseInt(r.iosdelay):parseInt(B().iosdelay):ionic.Platform.isWindowsPhone()&&(n+=r.winphonedelay?parseInt(r.winphonedelay):parseInt(B().winphonedelay)),n}function i(){setTimeout(function(){return a.$broadcast("ionicNativeTransitions.success")},n())}function o(){setTimeout(function(){return a.$broadcast("ionicNativeTransitions.error")},n())}if(t()){var r={};if(angular.isObject(arguments[0]))r=arguments[0];else if(angular.isString(arguments[0]))switch(arguments[0]){case"back":B().backInOppositeDirection&&arguments[1]&&I(arguments[1])?(r=I(arguments[1]),r.direction&&(r.direction=c[r.direction])):r=arguments[2]&&O(arguments[2])?O(arguments[2]):d}else r=g;r=angular.copy(r);var s=r.type;switch(delete r.type,e.debug("[native transition]",r),a.$broadcast("ionicNativeTransitions.beforeTransition"),s){case"flip":window.plugins.nativepagetransitions.flip(r,i,o);break;case"fade":window.plugins.nativepagetransitions.fade(r,i,o);break;case"curl":window.plugins.nativepagetransitions.curl(r,i,o);break;case"drawer":window.plugins.nativepagetransitions.drawer(r,i,o);break;case"slide":default:window.plugins.nativepagetransitions.slide(r,i,o)}}}function x(){window.plugins.nativepagetransitions.executePendingTransition(),k()}function y(){S(),k(),u=a.$on("$stateChangeError",x),l=a.$on(B().triggerTransitionEvent,x)}function k(){r||(r=a.$on("$stateChangeStart",function(n,t,i,r,s){a.$broadcast("stopVideos"),o(function(){console.log("carrying out the transition");var i=null;n.defaultPrevented||null!==t.nativeTransitions&&(i=P(t,r),e.debug("[native transition] $stateChangeStart",t,i),T(i))},100)}))}function O(n){return angular.isObject(n.nativeTransitionsBackIOS)&&ionic.Platform.isIOS()?angular.extend({},n.nativeTransitionsBackIOS):angular.isObject(n.nativeTransitionsBackAndroid)&&ionic.Platform.isAndroid()?angular.extend({},n.nativeTransitionsBackAndroid):angular.isObject(n.nativeTransitionsBackWindowsPhone)&&ionic.Platform.isWindowsPhone()?angular.extend({},n.nativeTransitionsBackWindowsPhone):angular.isObject(n.nativeTransitionsBack)?angular.extend({},n.nativeTransitionsBack):null}function P(n,t){var e={};if(console.log("From state"),console.log(t),console.log("To State"),console.log(n),console.log(n.name.indexOf(t.name)),-1===n.name.indexOf(t.name)){console.log("state not included");var i=n.name.split("."),a=i.length;console.log("State list"),console.log(i),console.log(a);for(var o=0;o!==a;o++){console.log("parent state");var r=f.get(i.join("."));if(console.log(r),!r)break;var s=I(r);if(console.log(s),!s||null===s.nativeTransitions)break;e=s,i.pop()}}else console.log("state is included in previous state"),e=I(n);return e}function I(n){return angular.isObject(n.nativeTransitionsIOS)&&ionic.Platform.isIOS()?angular.extend({},n.nativeTransitionsIOS):angular.isObject(n.nativeTransitionsAndroid)&&ionic.Platform.isAndroid()?angular.extend({},n.nativeTransitionsAndroid):angular.isObject(n.nativeTransitionsWindowsPhone)&&ionic.Platform.isWindowsPhone()?angular.extend({},n.nativeTransitionsWindowsPhone):angular.isObject(n.nativeTransitions)?angular.extend({},n.nativeTransitions):null}function j(){r&&angular.isFunction(r)&&(r(),r=null)}function S(){r&&angular.isFunction(r)&&(r(),r=null),s&&angular.isFunction(s)&&(s(),s=null),u&&angular.isFunction(u)&&(u(),u=null),l&&angular.isFunction(l)&&(l(),l=null)}function B(){return v}function E(){return A=a.$ionicGoBack,t()?void $():void e.debug("[native transition] The plugin is either disabled or nativepagetransitions plugin by telerik is not present. If you are getting this message in a browser, this is normal behavior, native transitions only work on device.")}function N(n){if(!m.backView())return void(navigator.app&&navigator.app.exitApp());if(!(n>=0)){var t=m.backView().stateName;if(n&&!isNaN(parseInt(n))){var i=m.viewHistory(),a=i.histories[m.currentView().historyId],o=a.cursor+n;(0>o||o>a.stack.length)&&(o=0),t=a.stack[o].stateName}j();var r=angular.extend({},f.current),s=angular.extend({},f.get(t));e.debug("nativepagetransitions goBack",n,t,r,s),m.goBack(n),T("back",r,s)}}var A=void 0,_=void 0;return{init:E,getDefaultOptions:B,enable:$,isEnabled:t,transition:T,registerToRouteEvents:y,unregisterToRouteEvents:S,registerToStateChangeStartEvent:k,unregisterToStateChangeStartEvent:j,locationUrl:w,stateGo:h,goBack:N}}o.$inject=["$log","$ionicConfig","$rootScope","$timeout","$state","$location","$ionicHistory","$ionicPlatform"];var r=null,s=null,u=null,l=null,c={up:"down",down:"up",left:"right",right:"left"},g={type:"slide",direction:"left"},d={type:"slide",direction:"right"},v={duration:400,slowdownfactor:4,iosdelay:-1,androiddelay:-1,winphonedelay:-1,fixedPixelsTop:0,fixedPixelsBottom:0,triggerTransitionEvent:"$ionicView.afterEnter",backInOppositeDirection:!1};return{$get:o,enable:n,setDefaultTransition:i,setDefaultBackTransition:a,setDefaultOptions:e}},n.exports=t["default"]},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=["$ionicNativeTransitions","$ionicPlatform","$ionicHistory","$rootScope",function(n,t,e,i){"ngInject";t.ready(function(){n.init()})}],n.exports=t["default"]}])});